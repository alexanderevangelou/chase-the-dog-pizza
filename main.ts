controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    animation.runImageAnimation(
    dog,
    [img`
        . . 4 4 4 . . . . 4 4 4 . . . . 
        . 4 5 5 5 e . . e 5 5 5 4 . . . 
        4 5 5 5 5 5 e e 5 5 5 5 5 4 . . 
        4 5 5 4 4 5 5 5 5 4 4 5 5 4 . . 
        e 5 4 4 5 5 5 5 5 5 4 4 5 e . . 
        . e e 5 5 5 5 5 5 5 5 e e . . . 
        . . e 5 f 5 5 5 5 f 5 e . . . . 
        . . f 5 5 5 4 4 5 5 5 f . . f f 
        . . f 4 5 5 f f 5 5 6 f . f 5 f 
        . . . f 6 6 6 6 6 6 4 4 f 5 5 f 
        . . . f 4 5 5 5 5 5 5 4 4 5 f . 
        . . . f 5 5 5 5 5 4 5 5 f f . . 
        . . . f 5 f f f 5 f f 5 f . . . 
        . . . f f . . f f . . f f . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . 4 4 4 . . . . 4 4 4 . . . . 
        . 4 5 5 5 e . . e 5 5 5 4 . . . 
        4 5 5 5 5 5 e e 5 5 5 5 5 4 . . 
        4 5 5 4 4 5 5 5 5 4 4 5 5 4 . . 
        e 5 4 4 5 5 5 5 5 5 4 4 5 e . . 
        . e e 5 5 5 5 5 5 5 5 e e . . . 
        . . e 5 f 5 5 5 5 f 5 e . . . . 
        . . f 5 5 5 4 4 5 5 5 f . f f . 
        . . . 4 5 5 f f 5 5 6 f f 5 f . 
        . . . f 6 6 6 6 6 6 4 4 4 5 f . 
        . . . f 5 5 5 5 5 5 5 f f f . . 
        . . . f 5 4 5 f f f 5 f . . . . 
        . . . f f f f f . . f f . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . 4 4 4 . . . . 4 4 4 . . . . 
        . 4 5 5 5 e . . e 5 5 5 4 . . . 
        4 5 5 5 5 5 e e 5 5 5 5 5 4 . . 
        4 5 5 4 4 5 5 5 5 4 4 5 5 4 . . 
        e 5 4 4 5 5 5 5 5 5 4 4 5 e . . 
        . e e 5 5 5 5 5 5 5 5 e e . . . 
        . . e 5 f 5 5 5 5 f 5 e . . . . 
        . . f 5 5 5 4 4 5 5 5 f . f f . 
        . . . 4 5 5 f f 5 5 6 f f 5 f . 
        . . . f 6 6 6 6 6 6 4 f 5 5 f . 
        . . . f 5 5 5 5 5 5 5 4 5 f . . 
        . . . . f 5 4 5 f 5 f f f . . . 
        . . . . . f f f f f f f . . . . 
        `],
    100,
    true
    )
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    animation.runImageAnimation(
    dog,
    [img`
        . . . . 4 4 4 . . . . 4 4 4 . . 
        . . . 4 5 5 5 e . . e 5 5 5 4 . 
        . . 4 5 5 5 5 5 e e 5 5 5 5 5 4 
        . . 4 5 5 4 4 5 5 5 5 4 4 5 5 4 
        . . e 5 4 4 5 5 5 5 5 5 4 4 5 e 
        . . . e e 5 5 5 5 5 5 5 5 e e . 
        . . . . e 5 f 5 5 5 5 f 5 e . . 
        f f . . f 5 5 5 4 4 5 5 5 f . . 
        f 5 f . f 6 5 5 f f 5 5 4 f . . 
        f 5 5 f 4 4 6 6 6 6 6 6 f . . . 
        . f 5 4 4 5 5 5 5 5 5 4 f . . . 
        . . f f 5 5 4 5 5 5 5 5 f . . . 
        . . . f 5 f f 5 f f f 5 f . . . 
        . . . f f . . f f . . f f . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . 4 4 4 . . . . 4 4 4 . . 
        . . . 4 5 5 5 e . . e 5 5 5 4 . 
        . . 4 5 5 5 5 5 e e 5 5 5 5 5 4 
        . . 4 5 5 4 4 5 5 5 5 4 4 5 5 4 
        . . e 5 4 4 5 5 5 5 5 5 4 4 5 e 
        . . . e e 5 5 5 5 5 5 5 5 e e . 
        . . . . e 5 f 5 5 5 5 f 5 e . . 
        . f f . f 5 5 5 4 4 5 5 5 f . . 
        . f 5 f f 6 5 5 f f 5 5 4 . . . 
        . f 5 4 4 4 6 6 6 6 6 6 f . . . 
        . . f f f 5 5 5 5 5 5 5 f . . . 
        . . . . f 5 f f f 5 4 5 f . . . 
        . . . . f f . . f f f f f . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . 4 4 4 . . . . 4 4 4 . . 
        . . . 4 5 5 5 e . . e 5 5 5 4 . 
        . . 4 5 5 5 5 5 e e 5 5 5 5 5 4 
        . . 4 5 5 4 4 5 5 5 5 4 4 5 5 4 
        . . e 5 4 4 5 5 5 5 5 5 4 4 5 e 
        . . . e e 5 5 5 5 5 5 5 5 e e . 
        . . . . e 5 f 5 5 5 5 f 5 e . . 
        . f f . f 5 5 5 4 4 5 5 5 f . . 
        . f 5 f f 6 5 5 f f 5 5 4 . . . 
        . f 5 5 f 4 6 6 6 6 6 6 f . . . 
        . . f 5 4 5 5 5 5 5 5 5 f . . . 
        . . . f f f 5 f 5 4 5 f . . . . 
        . . . . f f f f f f f . . . . . 
        `],
    100,
    true
    )
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Projectile, function (sprite, otherSprite) {
    info.changeLifeBy(-1)
    otherSprite.destroy()
})
info.onLifeZero(function () {
    game.over(false, effects.splatter)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Food, function (sprite, otherSprite) {
    info.changeScoreBy(1)
    pizza.setPosition(randint(0, 300), randint(0, 300))
    info.startCountdown(5)
})
let projectile: Sprite = null
let pizza: Sprite = null
let dog: Sprite = null
scene.setBackgroundColor(7)
tiles.setCurrentTilemap(tilemap`level1`)
game.setDialogFrame(img`
    ..................................................................
    .....888..888........................................888..888.....
    ...68777887778.66666.........6666666.........666666.87778877786...
    ..68777777777786999666.....66699999666.....666999968777777777786..
    ..687887777887899999966...6699999999966...6699999998788777788786..
    ..66788777788769999999666669999999999966666999999996788777788766..
    ..67777777777776999999999999999999999999999999999967777777777776..
    ..633777777773366999999999999999999999999999999996633777777773366.
    .6733776666773376999999999999999999999999999999996733776666773376.
    .677776dddd67777699999999999999999999999999999999677776dddd677776.
    .6d666dddddd666d6999999999999999999999999999999996d666dddddd666d6.
    .6dddddddddddddd6999999999999999999999999999999996dddddddddddddd6.
    ..6dddddddddddd699999999999999999999999999999999996dddddddddddd6..
    ...666666666666999999999999999999999999999999999999666666666666...
    ...699999999999999999999999999999999999999999999999999999999996...
    ..66999999999999999999999999999999999999999999999999999999999966..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999966..
    ..6699999999999999999999999999999999999999999999999999999999996...
    ...699999999999999999999999999999999999999999999999999999999966...
    ...66999999999999999999999999999999999999999999999999999999966....
    ....669999999999999999999999999999999999999999999999999999996.....
    .....69999999999999999999999999999999999999999999999999999996.....
    .....69999999999999999999999999999999999999999999999999999996.....
    .....699999999999999999999999999999999999999999999999999999966....
    ....66999999999999999999999999999999999999999999999999999999966...
    ...669999999999999999999999999999999999999999999999999999999996...
    ...6999999999999999999999999999999999999999999999999999999999966..
    ..66999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999966..
    ..6699999999999999999999999999999999999999999999999999999999996...
    ...699999999999999999999999999999999999999999999999999999999966...
    ...66999999999999999999999999999999999999999999999999999999966....
    ....669999999999999999999999999999999999999999999999999999996.....
    .....69999999999999999999999999999999999999999999999999999996.....
    .....69999999999999999999999999999999999999999999999999999996.....
    .....699999999999999999999999999999999999999999999999999999966....
    ....66999999999999999999999999999999999999999999999999999999966...
    ...669999999999999999999999999999999999999999999999999999999996...
    ...6999999999999999999999999999999999999999999999999999999999966..
    ..66999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..66999999999999999999999999999999999999999999999999999999999966..
    ...699999999999999999999999999999999999999999999999999999999996...
    ...668889988899999999999999999999999999999999999999998889988866...
    ....8777887778999999999999999999999999999999999999998777887778....
    ...877777777778999999999999999999999999999999999999877777777778...
    ...878877778878999999999999999999999999999999999999878877778878...
    ...678877778876999999999999999999999999999999999999678877778876...
    ..67777777777776999999999999999999999999999999999967777777777776..
    ..633777777773366999999999999999999999999999999996633777777773366.
    .6733776666773376999999999999999999999999999999996733776666773376.
    .677776dddd67777699999966666999999999996666699999677776dddd677776.
    .6d666dddddd666d69999966...6699999999966...6699996d666dddddd666d6.
    .6dddddddddddddd6999666.....66699999666.....666996dddddddddddddd6.
    ..6dddddddddddd666666.........6666666.........66666dddddddddddd6..
    ...666666666666....................................666666666666...
    ..................................................................
    `)
game.setDialogTextColor(2)
game.setDialogCursor(img`
    . . 4 4 4 . . . . 4 4 4 . . . . 
    . 4 5 5 5 e . . e 5 5 5 4 . . . 
    4 5 5 5 5 5 e e 5 5 5 5 5 4 . . 
    4 5 5 4 4 5 5 5 5 4 4 5 5 4 . . 
    e 5 4 4 5 5 5 5 5 5 4 4 5 e . . 
    . e e 5 5 5 5 5 5 5 5 e e . . . 
    . . e 5 f 5 5 5 5 f 5 e . . . . 
    . . f 5 5 5 4 4 5 5 5 f . . f f 
    . . f 4 5 5 f f 5 5 6 f . f 5 f 
    . . . f 6 6 6 6 6 6 4 4 f 5 5 f 
    . . . f 4 5 5 5 5 5 5 4 4 5 f . 
    . . . f 5 5 5 5 5 4 5 5 f f . . 
    . . . f 5 f f f 5 f f 5 f . . . 
    . . . f f . . f f . . f f . . . 
    `)
game.showLongText("CHASE THE DOG PIZZA", DialogLayout.Bottom)
game.setDialogFrame(img`
    ..................................................................
    .....888..888........................................888..888.....
    ...68777887778.66666.........6666666.........666666.87778877786...
    ..68777777777786999666.....66699999666.....666999968777777777786..
    ..687887777887899999966...6699999999966...6699999998788777788786..
    ..66788777788769999999666669999999999966666999999996788777788766..
    ..67777777777776999999999999999999999999999999999967777777777776..
    ..633777777773366999999999999999999999999999999996633777777773366.
    .6733776666773376999999999999999999999999999999996733776666773376.
    .677776dddd67777699999999999999999999999999999999677776dddd677776.
    .6d666dddddd666d6999999999999999999999999999999996d666dddddd666d6.
    .6dddddddddddddd6999999999999999999999999999999996dddddddddddddd6.
    ..6dddddddddddd699999999999999999999999999999999996dddddddddddd6..
    ...666666666666999999999999999999999999999999999999666666666666...
    ...699999999999999999999999999999999999999999999999999999999996...
    ..66999999999999999999999999999999999999999999999999999999999966..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999966..
    ..6699999999999999999999999999999999999999999999999999999999996...
    ...699999999999999999999999999999999999999999999999999999999966...
    ...66999999999999999999999999999999999999999999999999999999966....
    ....669999999999999999999999999999999999999999999999999999996.....
    .....69999999999999999999999999999999999999999999999999999996.....
    .....69999999999999999999999999999999999999999999999999999996.....
    .....699999999999999999999999999999999999999999999999999999966....
    ....66999999999999999999999999999999999999999999999999999999966...
    ...669999999999999999999999999999999999999999999999999999999996...
    ...6999999999999999999999999999999999999999999999999999999999966..
    ..66999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999966..
    ..6699999999999999999999999999999999999999999999999999999999996...
    ...699999999999999999999999999999999999999999999999999999999966...
    ...66999999999999999999999999999999999999999999999999999999966....
    ....669999999999999999999999999999999999999999999999999999996.....
    .....69999999999999999999999999999999999999999999999999999996.....
    .....69999999999999999999999999999999999999999999999999999996.....
    .....699999999999999999999999999999999999999999999999999999966....
    ....66999999999999999999999999999999999999999999999999999999966...
    ...669999999999999999999999999999999999999999999999999999999996...
    ...6999999999999999999999999999999999999999999999999999999999966..
    ..66999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..69999999999999999999999999999999999999999999999999999999999996..
    ..66999999999999999999999999999999999999999999999999999999999966..
    ...699999999999999999999999999999999999999999999999999999999996...
    ...668889988899999999999999999999999999999999999999998889988866...
    ....8777887778999999999999999999999999999999999999998777887778....
    ...877777777778999999999999999999999999999999999999877777777778...
    ...878877778878999999999999999999999999999999999999878877778878...
    ...678877778876999999999999999999999999999999999999678877778876...
    ..67777777777776999999999999999999999999999999999967777777777776..
    ..633777777773366999999999999999999999999999999996633777777773366.
    .6733776666773376999999999999999999999999999999996733776666773376.
    .677776dddd67777699999966666999999999996666699999677776dddd677776.
    .6d666dddddd666d69999966...6699999999966...6699996d666dddddd666d6.
    .6dddddddddddddd6999666.....66699999666.....666996dddddddddddddd6.
    ..6dddddddddddd666666.........6666666.........66666dddddddddddd6..
    ...666666666666....................................666666666666...
    ..................................................................
    `)
game.setDialogTextColor(2)
game.setDialogCursor(img`
    . . . . . . b b b b . . . . . . 
    . . . . . . b 4 4 4 b . . . . . 
    . . . . . . b b 4 4 4 b . . . . 
    . . . . . b 4 b b b 4 4 b . . . 
    . . . . b d 5 5 5 4 b 4 4 b . . 
    . . . . b 3 2 3 5 5 4 e 4 4 b . 
    . . . b d 2 2 2 5 7 5 4 e 4 4 e 
    . . . b 5 3 2 3 5 5 5 5 e e e e 
    . . b d 7 5 5 5 3 2 3 5 5 e e e 
    . . b 5 5 5 5 5 2 2 2 5 5 d e e 
    . b 3 2 3 5 7 5 3 2 3 5 d d e 4 
    . b 2 2 2 5 5 5 5 5 5 d d e 4 . 
    b d 3 2 d 5 5 5 d d d 4 4 . . . 
    b 5 5 5 5 d d 4 4 4 4 . . . . . 
    4 d d d 4 4 4 . . . . . . . . . 
    4 4 4 4 . . . . . . . . . . . . 
    `)
game.showLongText("CHASE THE DOG PIZZA", DialogLayout.Bottom)
dog = sprites.create(img`
    . . 4 4 4 . . . . 4 4 4 . . . . 
    . 4 5 5 5 e . . e 5 5 5 4 . . . 
    4 5 5 5 5 5 e e 5 5 5 5 5 4 . . 
    4 5 5 4 4 5 5 5 5 4 4 5 5 4 . . 
    e 5 4 4 5 5 5 5 5 5 4 4 5 e . . 
    . e e 5 5 5 5 5 5 5 5 e e . . . 
    . . e 5 f 5 5 5 5 f 5 e . . . . 
    . . f 5 5 5 4 4 5 5 5 f . . f f 
    . . f 4 5 5 f f 5 5 6 f . f 5 f 
    . . . f 6 6 6 6 6 6 4 4 f 5 5 f 
    . . . f 4 5 5 5 5 5 5 4 4 5 f . 
    . . . f 5 5 5 5 5 4 5 5 f f . . 
    . . . f 5 f f f 5 f f 5 f . . . 
    . . . f f . . f f . . f f . . . 
    `, SpriteKind.Player)
scene.cameraFollowSprite(dog)
controller.moveSprite(dog)
info.startCountdown(5)
info.setLife(4)
pizza = sprites.create(img`
    .............beebbbb............
    ............eebbbb4bb...........
    ............eb344bb4bb..........
    ............e44334bb4bb.........
    ............eb433344b4be........
    ............4eb43344444be.......
    ...........bd4eb43333344bb......
    ..........b455d4443333444bb.....
    ..........4d5555d444333444bb....
    .........4555555dd4b4443444be...
    ........bd5555d555d4bb444444ee..
    ........b55ddd665555bb4b44444ee.
    .......bd5555677655554ebb44444eb
    .......43222558855555d4eeb44b4ee
    ......b422332ddd555222d4eebbb4be
    ......be22232ed55522332db4ebbbbe
    .....bde22222e555e22232edd4bbbbe
    .....b52e222e3555e22222eddd4ebee
    ....bd552eee355552e222e355544eee
    ....665dd5555555552eee355dd4deee
    ...6776555555555555555551554d4ee
    ...4885222555dddd6655551544d4eee
    ..b45522332555dd677611d444ddeee.
    ..4d5222232e55555881d44ddd4eee..
    .bdd5e22222e555115114d54d4ee....
    .b55d2e222e351144d1d55eeee......
    bd5ddd2eee3d444555dd4e..........
    b555115dddd55d544eede...........
    4511d444d5544ee...4de...........
    41d4555d4ee........44...........
    41554eede.......................
    44ee...4e.......................
    `, SpriteKind.Food)
pizza.setPosition(randint(0, 300), randint(0, 300))
pizza.setStayInScreen(true)
pizza.setBounceOnWall(true)
game.onUpdateInterval(1000, function () {
    projectile = sprites.createProjectileFromSide(img`
        2 4 5 7 9 6 8 c 
        a b d 1 3 2 1 1 
        1 1 1 1 1 1 1 1 
        1 1 1 1 1 1 1 1 
        1 1 1 1 1 1 1 1 
        1 1 1 1 1 1 1 1 
        2 4 5 7 9 6 8 c 
        a b d 1 3 2 . . 
        `, randint(0, 100), randint(-100, 100))
    projectile.setKind(SpriteKind.Projectile)
    projectile.setBounceOnWall(true)
})
forever(function () {
    if (info.score() == 30) {
        game.over(true, effects.confetti)
    }
})
